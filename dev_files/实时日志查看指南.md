# ğŸ”´ å®æ—¶WebSocketæ—¥å¿—æŸ¥çœ‹æŒ‡å—

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ–¹æ³•1ï¼šä½¿ç”¨è‡ªåŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# å¯åŠ¨å®æ—¶æ—¥å¿—ç›‘æ§çª—å£
./start_live_logs.sh
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨å¯åŠ¨
```bash
# ç›´æ¥åœ¨å½“å‰çª—å£æŸ¥çœ‹
cd docker_deploy
docker-compose exec backend tail -f /app/logs/websocket_events.log
```

## ğŸ“‹ Screençª—å£ç®¡ç†

### æŸ¥çœ‹æ‰€æœ‰çª—å£
```bash
screen -ls
```

### è¿æ¥åˆ°æ—¥å¿—çª—å£
```bash
screen -r websocket-logs
```

### åˆ†ç¦»çª—å£ï¼ˆä¿æŒè¿è¡Œï¼‰
åœ¨screençª—å£ä¸­æŒ‰ï¼š`Ctrl+A` ç„¶åæŒ‰ `D`

### å…³é—­çª—å£
```bash
screen -S websocket-logs -X quit
```

## ğŸ” ä¸åŒç±»å‹çš„æ—¥å¿—ç›‘æ§

### 1. é‡è¦äº‹ä»¶æ—¥å¿—ï¼ˆæ¨èï¼‰
```bash
# åœ¨screençª—å£ä¸­è¿è¡Œ
docker-compose exec backend tail -f /app/logs/websocket_events.log
```

### 2. è¯¦ç»†è°ƒè¯•æ—¥å¿—
```bash
# åœ¨screençª—å£ä¸­è¿è¡Œ
docker-compose exec backend tail -f /app/logs/websocket_detailed.log
```

### 3. ç³»ç»Ÿåç«¯æ—¥å¿—
```bash
# åœ¨screençª—å£ä¸­è¿è¡Œ
docker-compose exec backend tail -f /app/logs/system_backend.log
```

### 4. è¿‡æ»¤ç‰¹å®šæœºå™¨äºº
```bash
# åªæŸ¥çœ‹Robot-1çš„æ—¥å¿—
docker-compose exec backend tail -f /app/logs/websocket_events.log | grep "Robot-1:"
```

## ğŸ“Š æ—¥å¿—å†…å®¹è¯´æ˜

### ğŸ”— è¿æ¥äº‹ä»¶
```
âœ… [Robot-1:å¿«é€’å°è½¦1] CONNECTION_ESTABLISHED: WebSocketè¿æ¥å·²å»ºç«‹
ğŸ”Œ [Robot-1:å¿«é€’å°è½¦1] CONNECTION_CLOSED: WebSocketè¿æ¥å·²å…³é—­
âŒ [Robot-1:å¿«é€’å°è½¦1] CONNECTION_FAILED: WebSocketè¿æ¥å¤±è´¥
```

### ğŸ’¬ æ¶ˆæ¯äº‹ä»¶
```
ğŸ“¥ [Robot-1:å¿«é€’å°è½¦1] MESSAGE_RECEIVED: æ”¶åˆ°æ¶ˆæ¯ | Type: status_update
ğŸ“¤ [Robot-1:å¿«é€’å°è½¦1] MESSAGE_SENT: å‘é€æ¶ˆæ¯ | Type: command
```

### âš¡ æŒ‡ä»¤æ‰§è¡Œ
```
âš¡ [Robot-1:å¿«é€’å°è½¦1] COMMAND_EXECUTED: æŒ‡ä»¤æ‰§è¡Œå®Œæˆ | Command: open_door | Result: door_open
ğŸ’¥ [Robot-1:å¿«é€’å°è½¦1] COMMAND_FAILED: æŒ‡ä»¤æ‰§è¡Œå¤±è´¥ | Command: open_door | Error: ç¡¬ä»¶æ•…éšœ
```

### ğŸ’“ å¿ƒè·³æ¶ˆæ¯
```
ğŸ’“ [Robot-1:å¿«é€’å°è½¦1] HEARTBEAT: æ”¶åˆ°å¿ƒè·³
```

### ğŸš¨ é”™è¯¯æ—¥å¿—
```
ğŸš¨ [Robot-1:å¿«é€’å°è½¦1] ERROR: å‘ç”Ÿé”™è¯¯: æ¶ˆæ¯æ ¼å¼é”™è¯¯
```

## ğŸ› ï¸ å®ç”¨æŠ€å·§

### 1. å¤šçª—å£ç›‘æ§
```bash
# åˆ›å»ºå¤šä¸ªscreençª—å£ç›‘æ§ä¸åŒç±»å‹çš„æ—¥å¿—
screen -dmS events-logs bash -c "docker-compose exec backend tail -f /app/logs/websocket_events.log"
screen -dmS detailed-logs bash -c "docker-compose exec backend tail -f /app/logs/websocket_detailed.log"
screen -dmS system-logs bash -c "docker-compose exec backend tail -f /app/logs/system_backend.log"
```

### 2. å®æ—¶ç»Ÿè®¡
```bash
# åœ¨å¦ä¸€ä¸ªçª—å£ä¸­è¿è¡Œç»Ÿè®¡å‘½ä»¤
screen -dmS stats bash -c "while true; do python view_websocket_logs.py --stats; sleep 30; done"
```

### 3. é”™è¯¯ç›‘æ§
```bash
# åªç›‘æ§é”™è¯¯æ—¥å¿—
docker-compose exec backend tail -f /app/logs/websocket_events.log | grep "ERROR\|FAILED"
```

### 4. æ€§èƒ½ç›‘æ§
```bash
# ç›‘æ§æ€§èƒ½æŒ‡æ ‡
docker-compose exec backend tail -f /app/logs/websocket_detailed.log | grep "PERFORMANCE"
```

## ğŸ“± å¿«æ·é”®å‚è€ƒ

### Screenå¿«æ·é”®
- `Ctrl+A` + `D` - åˆ†ç¦»çª—å£
- `Ctrl+A` + `C` - åˆ›å»ºæ–°çª—å£
- `Ctrl+A` + `N` - åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçª—å£
- `Ctrl+A` + `P` - åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªçª—å£
- `Ctrl+A` + `"` - æ˜¾ç¤ºçª—å£åˆ—è¡¨
- `Ctrl+A` + `?` - æ˜¾ç¤ºå¸®åŠ©

### æ—¥å¿—è¿‡æ»¤å¿«æ·é”®
- `Ctrl+C` - åœæ­¢ç›‘æ§
- `Ctrl+S` - æš‚åœè¾“å‡º
- `Ctrl+Q` - æ¢å¤è¾“å‡º

## ğŸ”§ æ•…éšœæ’é™¤

### 1. çª—å£æ— æ³•è¿æ¥
```bash
# æ£€æŸ¥screenä¼šè¯
screen -ls

# å¼ºåˆ¶é‡æ–°è¿æ¥
screen -r websocket-logs -D
```

### 2. æ—¥å¿—æ–‡ä»¶ä¸å­˜åœ¨
```bash
# æ£€æŸ¥æ—¥å¿—æ–‡ä»¶
docker-compose exec backend ls -la /app/logs/websocket_*.log

# é‡å¯åç«¯æœåŠ¡
docker-compose restart backend
```

### 3. æ—¥å¿—ä¸æ›´æ–°
```bash
# æ£€æŸ¥WebSocketè¿æ¥
python simple_websocket_test.py

# æ£€æŸ¥åç«¯çŠ¶æ€
docker-compose ps
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. **ä¿æŒçª—å£è¿è¡Œ**ï¼šä½¿ç”¨ `Ctrl+A` + `D` åˆ†ç¦»çª—å£ï¼Œè®©æ—¥å¿—ç›‘æ§åœ¨åå°è¿è¡Œ
2. **å®šæœŸæ£€æŸ¥**ï¼šæ¯å¤©æ£€æŸ¥ä¸€æ¬¡é”™è¯¯æ—¥å¿—
3. **å¤šçª—å£ç›‘æ§**ï¼šåŒæ—¶ç›‘æ§ä¸åŒç±»å‹çš„äº‹ä»¶
4. **è®¾ç½®å‘Šè­¦**ï¼šä¸ºé‡è¦é”™è¯¯è®¾ç½®é€šçŸ¥
5. **æ—¥å¿—è½®è½¬**ï¼šå®šæœŸæ¸…ç†æ—§æ—¥å¿—æ–‡ä»¶

## ğŸ¯ å¸¸ç”¨å‘½ä»¤æ€»ç»“

```bash
# å¯åŠ¨å®æ—¶ç›‘æ§
./start_live_logs.sh

# è¿æ¥åˆ°ç›‘æ§çª—å£
screen -r websocket-logs

# æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
python view_websocket_logs.py --stats

# æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡
python view_websocket_logs.py --performance

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
python view_websocket_logs.py --errors 24

# åœæ­¢ç›‘æ§
screen -S websocket-logs -X quit
```

ç°åœ¨ä½ å¯ä»¥è½»æ¾åœ°åœ¨ä¸“é—¨çš„çª—å£ä¸­å®æ—¶ç›‘æ§WebSocketæ—¥å¿—äº†ï¼ğŸ‰ 